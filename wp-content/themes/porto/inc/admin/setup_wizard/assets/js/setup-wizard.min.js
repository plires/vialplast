var PortoWizard=function(t){var e={install_plugins:function(t){(new n).init(t)},load_unused_shortcodes:function(){(new o).init()}};function i(){if(t(".button-next").on("click",(function(i){if(!(t(".porto_mini_status.file-permission").length>0))return!!a(this)&&(!t(this).data("callback")||void 0===e[t(this).data("callback")]||(e[t(this).data("callback")](this),!1));var n=this,o=t("body"),r=t(".porto-wizard-notification");if(i.preventDefault(),r.length>0){if(o.hasClass("show-pm-popup"))return r.addClass("shake"),void setTimeout((function(){r.removeClass("shake")}),1e3)}else{var s='<div class="porto-wizard-notification"><p><b>'+wp.i18n.__("Warning!")+"</b>"+wp.i18n.__("File permissions of the wp-contnet/uploads folder are not writable on your server. If you do not fix this, then you cannot import demos properly on your server.")+'&nbsp;<a href="https://www.wpbeginner.com/beginners-guide/how-to-fix-file-and-folder-permissions-error-in-wordpress/" target="_blank">'+wp.i18n.__("How to fix it?")+'</a></p><button class="btn btn-primary btn-action">'+wp.i18n.__("OK")+'</button><button class="btn btn-cancel">'+wp.i18n.__("CANCEL")+"</button></div>";o.append(s).on("click",".porto-wizard-notification .btn-action",(function(i){return o.removeClass("show-pm-popup"),!!a(n)&&(!t(n).data("callback")||void 0===e[t(n).data("callback")]||(e[t(n).data("callback")](n),!1))})).on("click",".porto-wizard-notification .btn-cancel",(function(t){o.removeClass("show-pm-popup")}))}setTimeout((function(){o.addClass("show-pm-popup")}),100)})),t(".shortcode_list").length)return e.load_unused_shortcodes(),!1;t(".button-upload").on("click",(function(t){t.preventDefault(),function(){"use strict";var t,e;if(void 0!==t)return void t.open();(t=wp.media.frames.file_frame=wp.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1})).on("select",(function(){e=t.state().get("selection").first().toJSON(),jQuery(".site-logo").attr("src",e.url),jQuery("#new_logo_id").val(e.id)})),t.open()}()})),t(".theme-presets a").on("click",(function(e){e.preventDefault(),t(this).parents("ul").first().find(".current").removeClass("current"),t(this).parents("li").first().addClass("current");var i=t(this).data("style");return t("#new_style").val(i),!1})),t('.porto-setup-wizard-plugins input[type="checkbox"]').on("change",(function(){var e=t(this).closest("li").data("slug");if("js_composer"==e||"elementor"==e||"visualcomposer"==e){var i=t(this).closest(".porto-setup-wizard-plugins"),n=t(this).closest("form").find(".porto-notice"),o=0,a=["js_composer","elementor","visualcomposer"];for(var r in a){var s=a[r];i.find('li[data-slug="'+s+'"]').length&&!i.find('li[data-slug="'+s+'"] input[type="checkbox"]').is(":checked")||o++}o>1?n.removeClass("d-none"):n.addClass("d-none")}}))}function n(){var e,i,n=0,o="",a="";function r(t){"object"==typeof t&&void 0!==t.message?(i.find("span").text(t.message),void 0!==t.url?t.hash==a?(i.find("span").text("failed"),l()):(t.plugin&&-1!==t.plugin.indexOf("visualcomposer")?t["activate-multi"]=1:!t.plugin||-1===t.plugin.indexOf("woocommerce")&&-1===t.plugin.indexOf("elementor")||(t.url=t.url+"&activate-multi=1"),a=t.hash,jQuery.post(t.url,t,(function(e){s(),i.find("span").text(t.message)})).fail(r)):(t.done,l())):(i.find("span").text("ajax error"),l())}function s(){o&&jQuery.post(ajaxurl+"?activate-multi=1",{action:"undefined"==typeof porto_setup_wizard_params?"porto_speed_optimize_wizard_plugins":"porto_setup_wizard_plugins",wpnonce:"undefined"==typeof porto_setup_wizard_params?porto_speed_optimize_wizard_params.wpnonce:porto_setup_wizard_params.wpnonce,slug:o},r).fail(r)}function l(){var a=!1;i&&(i.data("done_item")||(n++,i.data("done_item",1)),i.find(".spinner").css("visibility","hidden")),t(".porto-setup-wizard-plugins li").each((function(){t(this).hasClass("installing")&&(""==o||a?(o=t(this).data("slug"),i=t(this),s(),a=!1):t(this).data("slug")==o&&(a=!0))})),n>=t(".porto-setup-wizard-plugins li.installing").length&&e()}return{init:function(i){t(".porto-setup-wizard-plugins > li").each((function(){t(this).find('input[type="checkbox"]').is(":checked")&&t(this).addClass("installing")})),e=function(){t(i).attr("href")&&"#"!=t(i).attr("href")?window.location.href=i.href+"&activate-multi=1":window.location.reload()},l()}}}function o(){function t(t,e){if(null!=typeof e)for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1}function e(e){if(e){var i="";for(var n in e){var o=e[n];i+="<li>",i+='<label class="checkbox checkbox-inline">',i+='<input type="checkbox" name="shortcodes[]" value="'+o+'"'+(t(o,porto_speed_optimize_wizard_params.shortcodes_to_remove)?' checked="checked"':"")+">",i+=o,i+="</label>",i+="</li>"}jQuery(".shortcode_list").html(i),jQuery(".porto-setup-actions .btn:disabled").removeAttr("disabled")}}return{init:function(){jQuery(".shortcode_list").block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.6}}),jQuery.ajax({type:"post",url:ajaxurl,data:{action:"porto_speed_optimize_wizard_shortcodes",wpnonce:porto_speed_optimize_wizard_params.wpnonce},dataType:"json",success:e})}}}function a(t){var e=jQuery(t);if("yes"==e.data("done-loading"))return!1;var i=e.text(),n=e.outerWidth(),o="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",a=!1;e.css("width",n),e.addClass("wizard_step_loading_button_current");var r=e.is("input")?"val":"text";e[r](o),e.data("done-loading","yes");var s=[0,1,2];return function t(){if(!a){for(var i="",n=0;n<s.length;n++)s[n]=s[n]+1,s[n]>=o.length&&(s[n]=0),i+=o.charAt(s[n]);e[r](i),setTimeout((function(){t()}),60)}}(),{done:function(){a=!0,e[r](i),e.removeClass("wizard_step_loading_button_current"),e.attr("disabled",!1)}}}return{init:function(){t(i)}}}(jQuery);PortoWizard.init();